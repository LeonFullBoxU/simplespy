local player = game.Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui")

-- Create a ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.ResetOnSpawn = false
screenGui.Name = "PlayerGui"
screenGui.Parent = gui

-- Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0.25, 0, 0.3, 0)
mainFrame.Position = UDim2.new(0.02, 0, 0.02, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Rounded corners
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0.1, 0)
uiCorner.Parent = mainFrame

-- Title Label
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0.2, 0)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Player Settings"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextScaled = true
titleLabel.Font = Enum.Font.GothamBold
titleLabel.Parent = mainFrame

-- Spacing for options
local padding = Instance.new("UIPadding")
padding.PaddingTop = UDim.new(0.02, 0)
padding.PaddingBottom = UDim.new(0.02, 0)
padding.PaddingLeft = UDim.new(0.05, 0)
padding.PaddingRight = UDim.new(0.05, 0)
padding.Parent = mainFrame

-- Vertical Layout
local layout = Instance.new("UIListLayout")
layout.FillDirection = Enum.FillDirection.Vertical
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Top
layout.Padding = UDim.new(0.05, 0)
layout.Parent = mainFrame

-- Functions for Kill Grind
local teleportCoordinates = Vector3.new(-32.31, 593.24, 811.43)

local function removeForceField()
    local character = player.Character
    if character then
        local forceField = character:FindFirstChildOfClass("ForceField")
        if forceField then
            forceField:Destroy()
        end
    end
end

local function teleportCharacter()
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = CFrame.new(teleportCoordinates)
    end
end

local function applyDamage()
    local character = player.Character
    if character and character:FindFirstChild("Humanoid") then
        character.Humanoid:TakeDamage(999999999)
    end
end

local function activateKillGrind()
    removeForceField()
    teleportCharacter()
    wait(1.3)
    applyDamage()
end

-- Functions for Anti-AFK
local heartbeatConnection

local function activateAntiAfk()
    heartbeatConnection = game:GetService("Players").LocalPlayer.Idled:Connect(function()
        local vu = game:GetService("VirtualUser")
        vu:CaptureController()
        vu:ClickButton2(Vector2.new())
    end)
end

local function deactivateAntiAfk()
    if heartbeatConnection then
        heartbeatConnection:Disconnect()
        heartbeatConnection = nil
    end
end

-- Function to create toggle options
local function createOption(parent, optionName, onToggle)
    local optionFrame = Instance.new("Frame")
    optionFrame.Size = UDim2.new(1, 0, 0.2, 0)
    optionFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    optionFrame.BorderSizePixel = 0
    optionFrame.Parent = parent

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0.1, 0)
    corner.Parent = optionFrame

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0.7, 0, 1, 0)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = optionName
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextScaled = true
    label.Font = Enum.Font.Gotham
    label.Parent = optionFrame

    local checkbox = Instance.new("TextButton")
    checkbox.Size = UDim2.new(0.2, 0, 0.8, 0)
    checkbox.Position = UDim2.new(0.75, 0, 0.1, 0)
    checkbox.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    checkbox.Text = ""
    checkbox.AutoButtonColor = false
    checkbox.Parent = optionFrame

    local checkCorner = Instance.new("UICorner")
    checkCorner.CornerRadius = UDim.new(0.2, 0)
    checkCorner.Parent = checkbox

    local isActive = false
    checkbox.MouseButton1Click:Connect(function()
        isActive = not isActive
        checkbox.BackgroundColor3 = isActive and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(100, 100, 100)
        onToggle(isActive)
    end)
end

-- Create "Kill Grind" Option
createOption(mainFrame, "Kill Grind", function(isActive)
    if isActive then
        print("Kill Grind Activated!")
        activateKillGrind()
    else
        print("Kill Grind Deactivated!")
    end
end)

-- Create "Anti-AFK" Option
createOption(mainFrame, "Anti-AFK", function(isActive)
    if isActive then
        print("Anti-AFK Activated!")
        activateAntiAfk()
    else
        print("Anti-AFK Deactivated!")
        deactivateAntiAfk()
    end
end)

-- Handle Character Respawn
player.CharacterAdded:Connect(function(character)
    wait(0.5)
    activateKillGrind() -- Restart Kill Grind after respawn if it was active
end)
